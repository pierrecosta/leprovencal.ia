{"ast":null,"code":"import{useEffect,useState}from'react';import{getThemes,getCategories,getDictionary}from'../services/api';export function useDictionary(_ref){let{theme,categorie,lettre,search,page,sort,order}=_ref;const[mots,setMots]=useState([]);const[themes,setThemes]=useState(['tous']);const[categories,setCategories]=useState(['toutes']);const[pages,setPages]=useState(1);const[loading,setLoading]=useState(false);// Charger les thèmes\nuseEffect(()=>{getThemes().then(res=>setThemes(['tous',...(Array.isArray(res===null||res===void 0?void 0:res.data)?res.data:[])])).catch(()=>setThemes(['tous']));},[]);// Charger les catégories selon le thème\nuseEffect(()=>{getCategories(theme).then(res=>setCategories(['toutes',...(Array.isArray(res===null||res===void 0?void 0:res.data)?res.data:[])])).catch(()=>setCategories(['toutes']));},[theme]);// Charger les mots\nuseEffect(()=>{setLoading(true);getDictionary({theme,categorie,lettre,search,page,limit:20,sort,order}).then(res=>{const payload=res===null||res===void 0?void 0:res.data;const items=Array.isArray(payload)?payload:Array.isArray(payload===null||payload===void 0?void 0:payload.data)?payload.data:[];setMots(items);setPages(typeof(payload===null||payload===void 0?void 0:payload.pages)==='number'?payload.pages:1);}).catch(()=>{setMots([]);setPages(1);}).finally(()=>setLoading(false));},[theme,categorie,lettre,search,page,sort,order]);return{mots,themes,categories,pages,loading};}","map":{"version":3,"names":["useEffect","useState","getThemes","getCategories","getDictionary","useDictionary","_ref","theme","categorie","lettre","search","page","sort","order","mots","setMots","themes","setThemes","categories","setCategories","pages","setPages","loading","setLoading","then","res","Array","isArray","data","catch","limit","payload","items","finally"],"sources":["/mnt/c/code/leprovencal.ia/frontend/src/hooks/useDictionary.js"],"sourcesContent":["\r\nimport { useEffect, useState } from 'react';\r\nimport { getThemes, getCategories, getDictionary } from '../services/api';\r\n\r\nexport function useDictionary({ theme, categorie, lettre, search, page, sort, order }) {\r\n  const [mots, setMots] = useState([]);\r\n  const [themes, setThemes] = useState(['tous']);\r\n  const [categories, setCategories] = useState(['toutes']);\r\n  const [pages, setPages] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Charger les thèmes\r\n  useEffect(() => {\r\n    getThemes()\r\n      .then(res => setThemes(['tous', ...(Array.isArray(res?.data) ? res.data : [])]))\r\n      .catch(() => setThemes(['tous']));\r\n  }, []);\r\n\r\n  // Charger les catégories selon le thème\r\n  useEffect(() => {\r\n    getCategories(theme)\r\n      .then(res => setCategories(['toutes', ...(Array.isArray(res?.data) ? res.data : [])]))\r\n      .catch(() => setCategories(['toutes']));\r\n  }, [theme]);\r\n\r\n  // Charger les mots\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    getDictionary({ theme, categorie, lettre, search, page, limit: 20, sort, order })\r\n      .then(res => {\r\n        const payload = res?.data;\r\n        const items = Array.isArray(payload) ? payload : Array.isArray(payload?.data) ? payload.data : [];\r\n        setMots(items);\r\n        setPages(typeof payload?.pages === 'number' ? payload.pages : 1);\r\n      })\r\n      .catch(() => {\r\n        setMots([]);\r\n        setPages(1);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, [theme, categorie, lettre, search, page, sort, order]);\r\n\r\n  return { mots, themes, categories, pages, loading };\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}