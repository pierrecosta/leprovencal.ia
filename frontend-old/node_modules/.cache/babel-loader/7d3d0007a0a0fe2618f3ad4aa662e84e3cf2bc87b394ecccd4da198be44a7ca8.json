{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { getThemes, getCategories, getDictionary } from '../services/api';\nexport function useDictionary({\n  theme,\n  categorie,\n  lettre,\n  search,\n  page,\n  sort,\n  order\n}) {\n  _s();\n  const [mots, setMots] = useState([]);\n  const [themes, setThemes] = useState(['tous']);\n  const [categories, setCategories] = useState(['toutes']);\n  const [pages, setPages] = useState(1);\n  const [loading, setLoading] = useState(false);\n\n  // Charger les thèmes\n  useEffect(() => {\n    getThemes().then(res => setThemes(['tous', ...(Array.isArray(res === null || res === void 0 ? void 0 : res.data) ? res.data : [])])).catch(() => setThemes(['tous']));\n  }, []);\n\n  // Charger les catégories selon le thème\n  useEffect(() => {\n    getCategories(theme).then(res => setCategories(['toutes', ...(Array.isArray(res === null || res === void 0 ? void 0 : res.data) ? res.data : [])])).catch(() => setCategories(['toutes']));\n  }, [theme]);\n\n  // Charger les mots\n  useEffect(() => {\n    setLoading(true);\n    getDictionary({\n      theme,\n      categorie,\n      lettre,\n      search,\n      page,\n      limit: 20,\n      sort,\n      order\n    }).then(res => {\n      const payload = res === null || res === void 0 ? void 0 : res.data;\n      const items = Array.isArray(payload) ? payload : Array.isArray(payload === null || payload === void 0 ? void 0 : payload.data) ? payload.data : [];\n      setMots(items);\n      setPages(typeof (payload === null || payload === void 0 ? void 0 : payload.pages) === 'number' ? payload.pages : 1);\n    }).catch(() => {\n      setMots([]);\n      setPages(1);\n    }).finally(() => setLoading(false));\n  }, [theme, categorie, lettre, search, page, sort, order]);\n  return {\n    mots,\n    themes,\n    categories,\n    pages,\n    loading\n  };\n}\n_s(useDictionary, \"oEF+hVkNKtrZfuU6NwNK4FzBDyU=\");","map":{"version":3,"names":["useEffect","useState","getThemes","getCategories","getDictionary","useDictionary","theme","categorie","lettre","search","page","sort","order","_s","mots","setMots","themes","setThemes","categories","setCategories","pages","setPages","loading","setLoading","then","res","Array","isArray","data","catch","limit","payload","items","finally"],"sources":["/mnt/c/code/leprovencal.ia/frontend/src/hooks/useDictionary.js"],"sourcesContent":["\r\nimport { useEffect, useState } from 'react';\r\nimport { getThemes, getCategories, getDictionary } from '../services/api';\r\n\r\nexport function useDictionary({ theme, categorie, lettre, search, page, sort, order }) {\r\n  const [mots, setMots] = useState([]);\r\n  const [themes, setThemes] = useState(['tous']);\r\n  const [categories, setCategories] = useState(['toutes']);\r\n  const [pages, setPages] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Charger les thèmes\r\n  useEffect(() => {\r\n    getThemes()\r\n      .then(res => setThemes(['tous', ...(Array.isArray(res?.data) ? res.data : [])]))\r\n      .catch(() => setThemes(['tous']));\r\n  }, []);\r\n\r\n  // Charger les catégories selon le thème\r\n  useEffect(() => {\r\n    getCategories(theme)\r\n      .then(res => setCategories(['toutes', ...(Array.isArray(res?.data) ? res.data : [])]))\r\n      .catch(() => setCategories(['toutes']));\r\n  }, [theme]);\r\n\r\n  // Charger les mots\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    getDictionary({ theme, categorie, lettre, search, page, limit: 20, sort, order })\r\n      .then(res => {\r\n        const payload = res?.data;\r\n        const items = Array.isArray(payload) ? payload : Array.isArray(payload?.data) ? payload.data : [];\r\n        setMots(items);\r\n        setPages(typeof payload?.pages === 'number' ? payload.pages : 1);\r\n      })\r\n      .catch(() => {\r\n        setMots([]);\r\n        setPages(1);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, [theme, categorie, lettre, search, page, sort, order]);\r\n\r\n  return { mots, themes, categories, pages, loading };\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}