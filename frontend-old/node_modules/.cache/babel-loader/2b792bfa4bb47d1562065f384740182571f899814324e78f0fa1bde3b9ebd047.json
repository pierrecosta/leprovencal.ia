{"ast":null,"code":"var _jsxFileName = \"/mnt/c/code/leprovencal.ia/frontend/src/pages/HistoryPage.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport ApiAlert from '../components/ApiAlert';\nimport Loader from '../components/Loader';\nimport { useAuth } from '../hooks/useAuth';\nimport { logError } from '../utils/logger';\nimport { createHistoire, deleteHistoire, getHistoireById, getMenuHistoires, updateHistoire, getApiErrorMessage, getApiErrorField } from '../services/api';\nimport { toastError, toastSuccess } from '../utils/notify';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function HistoryPage() {\n  _s();\n  const {\n    user,\n    ready\n  } = useAuth();\n  const [menuData, setMenuData] = useState({});\n  const [selected, setSelected] = useState(null);\n  const [creating, setCreating] = useState(false);\n  const [createForm, setCreateForm] = useState({\n    titre: '',\n    typologie: '',\n    periode: '',\n    descriptionCourte: '',\n    descriptionLongue: '',\n    sourceUrl: ''\n  });\n  const [editing, setEditing] = useState(false);\n  const [editForm, setEditForm] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [loadingDetail, setLoadingDetail] = useState(false);\n  const [error, setError] = useState('');\n  const [fieldErrors, setFieldErrors] = useState({});\n  useEffect(() => {\n    async function fetchMenu() {\n      setLoading(true);\n      setError('');\n      try {\n        const res = await getMenuHistoires();\n        setMenuData(res.data);\n      } catch (err) {\n        logError(err);\n        const msg = \"Impossible de charger le sommaire.\";\n        setError(msg);\n        toastError(msg);\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchMenu();\n  }, []);\n  const refreshMenu = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      const res = await getMenuHistoires();\n      setMenuData(res.data);\n    } catch (err) {\n      logError(err);\n      setError(\"Impossible de charger le sommaire.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const openDetail = async id => {\n    setLoadingDetail(true);\n    setError('');\n    try {\n      const res = await getHistoireById(id);\n      setSelected(res.data);\n      setEditing(false);\n      setEditForm(null);\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n    } catch (err) {\n      logError(err);\n      const msg = getApiErrorMessage(err);\n      setError(msg || \"Impossible de charger cette histoire.\");\n      toastError(msg || \"Impossible de charger cette histoire.\");\n    } finally {\n      setLoadingDetail(false);\n    }\n  };\n  const backToMenu = () => {\n    setSelected(null);\n    setError('');\n    setEditing(false);\n    setEditForm(null);\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  };\n  const startEditing = () => {\n    var _selected$titre, _selected$typologie, _selected$periode, _selected$description, _selected$description2, _selected$sourceUrl;\n    if (!selected) return;\n    setEditing(true);\n    setEditForm({\n      titre: (_selected$titre = selected.titre) !== null && _selected$titre !== void 0 ? _selected$titre : '',\n      typologie: (_selected$typologie = selected.typologie) !== null && _selected$typologie !== void 0 ? _selected$typologie : '',\n      periode: (_selected$periode = selected.periode) !== null && _selected$periode !== void 0 ? _selected$periode : '',\n      descriptionCourte: (_selected$description = selected.descriptionCourte) !== null && _selected$description !== void 0 ? _selected$description : '',\n      descriptionLongue: (_selected$description2 = selected.descriptionLongue) !== null && _selected$description2 !== void 0 ? _selected$description2 : '',\n      sourceUrl: (_selected$sourceUrl = selected.sourceUrl) !== null && _selected$sourceUrl !== void 0 ? _selected$sourceUrl : ''\n    });\n  };\n  const cancelEditing = () => {\n    setEditing(false);\n    setEditForm(null);\n  };\n  const saveEditing = async () => {\n    if (!selected || !editForm) return;\n    setError('');\n    setFieldErrors({});\n    try {\n      const updated = await updateHistoire(selected.id, editForm);\n      setSelected(updated);\n      setEditing(false);\n      setEditForm(null);\n      await refreshMenu();\n      toastSuccess('Histoire modifiée.');\n    } catch (err) {\n      logError(err);\n      const msg = getApiErrorMessage(err);\n      setError(msg || \"Impossible de modifier cette histoire.\");\n      toastError(msg || \"Impossible de modifier cette histoire.\");\n      const field = getApiErrorField(err);\n      if (field) setFieldErrors({\n        [field]: msg\n      });\n    }\n  };\n  const removeSelected = async () => {\n    if (!selected) return;\n    const ok = window.confirm('Supprimer cette histoire ?');\n    if (!ok) return;\n    setError('');\n    setFieldErrors({});\n    try {\n      await deleteHistoire(selected.id);\n      setSelected(null);\n      setEditing(false);\n      setEditForm(null);\n      await refreshMenu();\n      toastSuccess('Histoire supprimée.');\n    } catch (err) {\n      logError(err);\n      const msg = getApiErrorMessage(err);\n      setError(msg || \"Impossible de supprimer cette histoire.\");\n      toastError(msg || \"Impossible de supprimer cette histoire.\");\n    }\n  };\n  const submitCreate = async e => {\n    e.preventDefault();\n    setError('');\n    setFieldErrors({});\n    try {\n      const created = await createHistoire(createForm);\n      setCreateForm({\n        titre: '',\n        typologie: '',\n        periode: '',\n        descriptionCourte: '',\n        descriptionLongue: '',\n        sourceUrl: ''\n      });\n      setCreating(false);\n      await refreshMenu();\n      await openDetail(created.id);\n      toastSuccess('Histoire créée.');\n    } catch (err) {\n      logError(err);\n      const msg = getApiErrorMessage(err);\n      setError(msg || \"Impossible de créer une histoire.\");\n      toastError(msg || \"Impossible de créer une histoire.\");\n      const field = getApiErrorField(err);\n      if (field) setFieldErrors({\n        [field]: msg\n      });\n    }\n  };\n  if (selected) {\n    var _editForm$titre, _editForm$typologie, _editForm$periode, _editForm$description, _editForm$description2, _editForm$sourceUrl;\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-5xl mx-auto p-6\",\n      children: [error && /*#__PURE__*/_jsxDEV(ApiAlert, {\n        message: error,\n        kind: \"error\",\n        className: \"mb-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: backToMenu,\n          className: \"btn btn-secondary\",\n          children: \"\\u2190 Retour au menu\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"article\", {\n        className: \"mb-6 p-6 border rounded shadow-sm bg-white\",\n        children: loadingDetail ? /*#__PURE__*/_jsxDEV(Loader, {\n          message: \"Chargement...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: !editing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"font-bold text-2xl text-[var(--color-lavender)] mb-3\",\n              children: selected.titre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mr-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Typologie :\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 23\n                }, this), \" \", selected.typologie]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"P\\xE9riode :\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 23\n                }, this), \" \", selected.periode]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 19\n            }, this), selected.descriptionLongue && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-4 whitespace-pre-line leading-relaxed\",\n              children: selected.descriptionLongue\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 21\n            }, this), selected.sourceUrl && /*#__PURE__*/_jsxDEV(\"a\", {\n              href: selected.sourceUrl,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              className: \"text-[var(--color-terra)] hover:underline text-sm\",\n              children: \"Voir la source \\u2192\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 21\n            }, this), ready && user && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-6 flex flex-wrap gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startEditing,\n                className: \"btn btn-primary\",\n                children: \"Modifier\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: removeSelected,\n                className: \"btn btn-danger\",\n                children: \"Supprimer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"font-bold text-xl text-[var(--color-lavender)] mb-3\",\n              children: \"Modifier l\\u2019histoire\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid md:grid-cols-2 gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-semibold mb-1\",\n                  children: \"Titre\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"input\",\n                  value: (_editForm$titre = editForm === null || editForm === void 0 ? void 0 : editForm.titre) !== null && _editForm$titre !== void 0 ? _editForm$titre : '',\n                  onChange: e => setEditForm(f => ({\n                    ...f,\n                    titre: e.target.value\n                  }))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 23\n                }, this), fieldErrors.titre && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-red-600 text-sm mt-1\",\n                  children: fieldErrors.titre\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-semibold mb-1\",\n                  children: \"Typologie\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"input\",\n                  value: (_editForm$typologie = editForm === null || editForm === void 0 ? void 0 : editForm.typologie) !== null && _editForm$typologie !== void 0 ? _editForm$typologie : '',\n                  onChange: e => setEditForm(f => ({\n                    ...f,\n                    typologie: e.target.value\n                  }))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 23\n                }, this), fieldErrors.typologie && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-red-600 text-sm mt-1\",\n                  children: fieldErrors.typologie\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-semibold mb-1\",\n                  children: \"P\\xE9riode\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"input\",\n                  value: (_editForm$periode = editForm === null || editForm === void 0 ? void 0 : editForm.periode) !== null && _editForm$periode !== void 0 ? _editForm$periode : '',\n                  onChange: e => setEditForm(f => ({\n                    ...f,\n                    periode: e.target.value\n                  }))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 23\n                }, this), fieldErrors.periode && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-red-600 text-sm mt-1\",\n                  children: fieldErrors.periode\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 47\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-semibold mb-1\",\n                  children: \"L\\xE9gende courte (survol)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"input\",\n                  value: (_editForm$description = editForm === null || editForm === void 0 ? void 0 : editForm.descriptionCourte) !== null && _editForm$description !== void 0 ? _editForm$description : '',\n                  onChange: e => setEditForm(f => ({\n                    ...f,\n                    descriptionCourte: e.target.value\n                  }))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 23\n                }, this), fieldErrors.descriptionCourte && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-red-600 text-sm mt-1\",\n                  children: fieldErrors.descriptionCourte\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 57\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-semibold mb-1\",\n                children: \"Texte\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"input\",\n                rows: 8,\n                value: (_editForm$description2 = editForm === null || editForm === void 0 ? void 0 : editForm.descriptionLongue) !== null && _editForm$description2 !== void 0 ? _editForm$description2 : '',\n                onChange: e => setEditForm(f => ({\n                  ...f,\n                  descriptionLongue: e.target.value\n                }))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-semibold mb-1\",\n                children: \"Source (URL)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                value: (_editForm$sourceUrl = editForm === null || editForm === void 0 ? void 0 : editForm.sourceUrl) !== null && _editForm$sourceUrl !== void 0 ? _editForm$sourceUrl : '',\n                onChange: e => setEditForm(f => ({\n                  ...f,\n                  sourceUrl: e.target.value\n                }))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-6 flex flex-wrap gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: saveEditing,\n                className: \"btn btn-primary\",\n                children: \"Enregistrer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: cancelEditing,\n                className: \"btn btn-secondary\",\n                children: \"Annuler\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, void 0, false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: backToMenu,\n          className: \"btn btn-secondary\",\n          children: \"\\u2190 Retour au menu\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"max-w-5xl mx-auto p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold text-[var(--color-lavender)] mb-6\",\n      children: \"Histoire & l\\xE9gendes \\u2014 Sommaire\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(ApiAlert, {\n      message: error,\n      kind: \"error\",\n      className: \"mb-4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 17\n    }, this), ready && user && /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"mb-6 border rounded bg-white shadow-sm\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"px-4 py-3 border-b bg-[var(--bg)] flex items-center justify-between gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-bold text-xl text-[var(--color-lavender)]\",\n          children: \"Gestion (loggu\\xE9)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: () => setCreating(v => !v),\n          children: creating ? 'Fermer' : 'Ajouter une histoire'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 11\n      }, this), creating && /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: submitCreate,\n        className: \"p-4 space-y-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid md:grid-cols-2 gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold mb-1\",\n              children: \"Titre *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              required: true,\n              value: createForm.titre,\n              onChange: e => setCreateForm(f => ({\n                ...f,\n                titre: e.target.value\n              }))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 19\n            }, this), fieldErrors.titre && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-red-600 text-sm mt-1\",\n              children: fieldErrors.titre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold mb-1\",\n              children: \"Typologie *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              required: true,\n              value: createForm.typologie,\n              onChange: e => setCreateForm(f => ({\n                ...f,\n                typologie: e.target.value\n              }))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 19\n            }, this), fieldErrors.typologie && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-red-600 text-sm mt-1\",\n              children: fieldErrors.typologie\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold mb-1\",\n              children: \"P\\xE9riode *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              required: true,\n              value: createForm.periode,\n              onChange: e => setCreateForm(f => ({\n                ...f,\n                periode: e.target.value\n              }))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 19\n            }, this), fieldErrors.periode && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-red-600 text-sm mt-1\",\n              children: fieldErrors.periode\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 43\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold mb-1\",\n              children: \"L\\xE9gende courte (survol)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              value: createForm.descriptionCourte,\n              onChange: e => setCreateForm(f => ({\n                ...f,\n                descriptionCourte: e.target.value\n              }))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 19\n            }, this), fieldErrors.descriptionCourte && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-red-600 text-sm mt-1\",\n              children: fieldErrors.descriptionCourte\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 53\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-semibold mb-1\",\n            children: \"Texte\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"input\",\n            rows: 6,\n            value: createForm.descriptionLongue,\n            onChange: e => setCreateForm(f => ({\n              ...f,\n              descriptionLongue: e.target.value\n            }))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-semibold mb-1\",\n            children: \"Source (URL)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            value: createForm.sourceUrl,\n            onChange: e => setCreateForm(f => ({\n              ...f,\n              sourceUrl: e.target.value\n            }))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Cr\\xE9er\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 9\n    }, this), loading ? /*#__PURE__*/_jsxDEV(Loader, {\n      message: \"Chargement du sommaire...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-8\",\n      children: [Object.keys(menuData).length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600\",\n        children: \"Aucun contenu disponible.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 50\n      }, this), Object.entries(menuData).map(([typologie, periodes]) => /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"border rounded bg-white shadow-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"px-4 py-3 border-b bg-[var(--bg)]\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-bold text-xl text-[var(--color-lavender)]\",\n            children: typologie\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 space-y-6\",\n          children: Object.entries(periodes).map(([periode, items]) => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-lg text-gray-800 mb-2\",\n              children: periode\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"grid md:grid-cols-2 gap-2\",\n              children: items.map(({\n                id,\n                titre,\n                descriptionCourte\n              }) => /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"relative\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => openDetail(id),\n                  className: \"group w-full text-left px-3 py-2 rounded border hover:border-[var(--color-terra)] hover:bg-white\",\n                  \"aria-describedby\": `hint-${id}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-[var(--color-terra)] font-medium group-hover:underline\",\n                    children: titre\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 436,\n                    columnNumber: 29\n                  }, this), descriptionCourte && /*#__PURE__*/_jsxDEV(\"span\", {\n                    id: `hint-${id}`,\n                    className: \"pointer-events-none absolute left-full top-1 ml-3 z-10 hidden group-hover:block group-focus-within:block w-64 p-2 bg-black text-white text-sm rounded shadow-lg\",\n                    children: descriptionCourte\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 439,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 431,\n                  columnNumber: 27\n                }, this)\n              }, id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 21\n            }, this)]\n          }, periode, true, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 15\n        }, this)]\n      }, typologie, true, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 326,\n    columnNumber: 5\n  }, this);\n}\n_s(HistoryPage, \"FawSKfZgz2uRH8k9Rv+UB7yaVck=\", false, function () {\n  return [useAuth];\n});\n_c = HistoryPage;\nvar _c;\n$RefreshReg$(_c, \"HistoryPage\");","map":{"version":3,"names":["useEffect","useState","ApiAlert","Loader","useAuth","logError","createHistoire","deleteHistoire","getHistoireById","getMenuHistoires","updateHistoire","getApiErrorMessage","getApiErrorField","toastError","toastSuccess","jsxDEV","_jsxDEV","Fragment","_Fragment","HistoryPage","_s","user","ready","menuData","setMenuData","selected","setSelected","creating","setCreating","createForm","setCreateForm","titre","typologie","periode","descriptionCourte","descriptionLongue","sourceUrl","editing","setEditing","editForm","setEditForm","loading","setLoading","loadingDetail","setLoadingDetail","error","setError","fieldErrors","setFieldErrors","fetchMenu","res","data","err","msg","refreshMenu","openDetail","id","window","scrollTo","top","behavior","backToMenu","startEditing","_selected$titre","_selected$typologie","_selected$periode","_selected$description","_selected$description2","_selected$sourceUrl","cancelEditing","saveEditing","updated","field","removeSelected","ok","confirm","submitCreate","e","preventDefault","created","_editForm$titre","_editForm$typologie","_editForm$periode","_editForm$description","_editForm$description2","_editForm$sourceUrl","className","children","message","kind","fileName","_jsxFileName","lineNumber","columnNumber","onClick","href","target","rel","value","onChange","f","rows","v","onSubmit","required","type","Object","keys","length","entries","map","periodes","items","_c","$RefreshReg$"],"sources":["/mnt/c/code/leprovencal.ia/frontend/src/pages/HistoryPage.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport ApiAlert from '../components/ApiAlert';\r\nimport Loader from '../components/Loader';\r\nimport { useAuth } from '../hooks/useAuth';\r\nimport { logError } from '../utils/logger';\r\nimport { createHistoire, deleteHistoire, getHistoireById, getMenuHistoires, updateHistoire, getApiErrorMessage, getApiErrorField } from '../services/api';\r\nimport { toastError, toastSuccess } from '../utils/notify';\r\n\r\nexport default function HistoryPage() {\r\n  const { user, ready } = useAuth();\r\n  const [menuData, setMenuData] = useState({});\r\n  const [selected, setSelected] = useState(null);\r\n\r\n  const [creating, setCreating] = useState(false);\r\n  const [createForm, setCreateForm] = useState({\r\n    titre: '',\r\n    typologie: '',\r\n    periode: '',\r\n    descriptionCourte: '',\r\n    descriptionLongue: '',\r\n    sourceUrl: '',\r\n  });\r\n\r\n  const [editing, setEditing] = useState(false);\r\n  const [editForm, setEditForm] = useState(null);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [loadingDetail, setLoadingDetail] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [fieldErrors, setFieldErrors] = useState({});\r\n\r\n  useEffect(() => {\r\n    async function fetchMenu() {\r\n      setLoading(true);\r\n      setError('');\r\n      try {\r\n        const res = await getMenuHistoires();\r\n        setMenuData(res.data);\r\n      } catch (err) {\r\n        logError(err);\r\n        const msg = \"Impossible de charger le sommaire.\";\r\n        setError(msg);\r\n        toastError(msg);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchMenu();\r\n  }, []);\r\n\r\n  const refreshMenu = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      const res = await getMenuHistoires();\r\n      setMenuData(res.data);\r\n    } catch (err) {\r\n      logError(err);\r\n      setError(\"Impossible de charger le sommaire.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const openDetail = async (id) => {\r\n    setLoadingDetail(true);\r\n    setError('');\r\n    try {\r\n      const res = await getHistoireById(id);\r\n      setSelected(res.data);\r\n      setEditing(false);\r\n      setEditForm(null);\r\n      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    } catch (err) {\r\n      logError(err);\r\n      const msg = getApiErrorMessage(err);\r\n      setError(msg || \"Impossible de charger cette histoire.\");\r\n      toastError(msg || \"Impossible de charger cette histoire.\");\r\n    } finally {\r\n      setLoadingDetail(false);\r\n    }\r\n  };\r\n\r\n  const backToMenu = () => {\r\n    setSelected(null);\r\n    setError('');\r\n    setEditing(false);\r\n    setEditForm(null);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const startEditing = () => {\r\n    if (!selected) return;\r\n    setEditing(true);\r\n    setEditForm({\r\n      titre: selected.titre ?? '',\r\n      typologie: selected.typologie ?? '',\r\n      periode: selected.periode ?? '',\r\n      descriptionCourte: selected.descriptionCourte ?? '',\r\n      descriptionLongue: selected.descriptionLongue ?? '',\r\n      sourceUrl: selected.sourceUrl ?? '',\r\n    });\r\n  };\r\n\r\n  const cancelEditing = () => {\r\n    setEditing(false);\r\n    setEditForm(null);\r\n  };\r\n\r\n  const saveEditing = async () => {\r\n    if (!selected || !editForm) return;\r\n    setError('');\r\n    setFieldErrors({});\r\n    try {\r\n      const updated = await updateHistoire(selected.id, editForm);\r\n      setSelected(updated);\r\n      setEditing(false);\r\n      setEditForm(null);\r\n      await refreshMenu();\r\n      toastSuccess('Histoire modifiée.');\r\n    } catch (err) {\r\n      logError(err);\r\n      const msg = getApiErrorMessage(err);\r\n      setError(msg || \"Impossible de modifier cette histoire.\");\r\n      toastError(msg || \"Impossible de modifier cette histoire.\");\r\n      const field = getApiErrorField(err);\r\n      if (field) setFieldErrors({ [field]: msg });\r\n    }\r\n  };\r\n\r\n  const removeSelected = async () => {\r\n    if (!selected) return;\r\n    const ok = window.confirm('Supprimer cette histoire ?');\r\n    if (!ok) return;\r\n    setError('');\r\n    setFieldErrors({});\r\n    try {\r\n      await deleteHistoire(selected.id);\r\n      setSelected(null);\r\n      setEditing(false);\r\n      setEditForm(null);\r\n      await refreshMenu();\r\n      toastSuccess('Histoire supprimée.');\r\n    } catch (err) {\r\n      logError(err);\r\n      const msg = getApiErrorMessage(err);\r\n      setError(msg || \"Impossible de supprimer cette histoire.\");\r\n      toastError(msg || \"Impossible de supprimer cette histoire.\");\r\n    }\r\n  };\r\n\r\n  const submitCreate = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setFieldErrors({});\r\n    try {\r\n      const created = await createHistoire(createForm);\r\n      setCreateForm({\r\n        titre: '',\r\n        typologie: '',\r\n        periode: '',\r\n        descriptionCourte: '',\r\n        descriptionLongue: '',\r\n        sourceUrl: '',\r\n      });\r\n      setCreating(false);\r\n      await refreshMenu();\r\n      await openDetail(created.id);\r\n      toastSuccess('Histoire créée.');\r\n    } catch (err) {\r\n      logError(err);\r\n      const msg = getApiErrorMessage(err);\r\n      setError(msg || \"Impossible de créer une histoire.\");\r\n      toastError(msg || \"Impossible de créer une histoire.\");\r\n      const field = getApiErrorField(err);\r\n      if (field) setFieldErrors({ [field]: msg });\r\n    }\r\n  };\r\n\r\n  if (selected) {\r\n    return (\r\n      <main className=\"max-w-5xl mx-auto p-6\">\r\n        {error && <ApiAlert message={error} kind=\"error\" className=\"mb-4\" />}\r\n\r\n        <div className=\"mb-4\">\r\n          <button\r\n            onClick={backToMenu}\r\n            className=\"btn btn-secondary\"\r\n          >\r\n            ← Retour au menu\r\n          </button>\r\n        </div>\r\n\r\n        <article className=\"mb-6 p-6 border rounded shadow-sm bg-white\">\r\n          {loadingDetail ? (\r\n            <Loader message=\"Chargement...\" />\r\n          ) : (\r\n            <>\r\n              {!editing ? (\r\n                <>\r\n                  <h1 className=\"font-bold text-2xl text-[var(--color-lavender)] mb-3\">{selected.titre}</h1>\r\n\r\n                  <div className=\"text-sm text-gray-600 mb-4\">\r\n                    <span className=\"mr-3\">\r\n                      <strong>Typologie :</strong> {selected.typologie}\r\n                    </span>\r\n                    <span>\r\n                      <strong>Période :</strong> {selected.periode}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {selected.descriptionLongue && (\r\n                    <p className=\"mb-4 whitespace-pre-line leading-relaxed\">{selected.descriptionLongue}</p>\r\n                  )}\r\n                  {selected.sourceUrl && (\r\n                    <a\r\n                      href={selected.sourceUrl}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      className=\"text-[var(--color-terra)] hover:underline text-sm\"\r\n                    >\r\n                      Voir la source →\r\n                    </a>\r\n                  )}\r\n\r\n                  {ready && user && (\r\n                    <div className=\"mt-6 flex flex-wrap gap-2\">\r\n                      <button onClick={startEditing} className=\"btn btn-primary\">\r\n                        Modifier\r\n                      </button>\r\n                      <button onClick={removeSelected} className=\"btn btn-danger\">\r\n                        Supprimer\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <h2 className=\"font-bold text-xl text-[var(--color-lavender)] mb-3\">Modifier l’histoire</h2>\r\n\r\n                  <div className=\"grid md:grid-cols-2 gap-3\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold mb-1\">Titre</label>\r\n                      <input\r\n                        className=\"input\"\r\n                        value={editForm?.titre ?? ''}\r\n                        onChange={(e) => setEditForm((f) => ({ ...f, titre: e.target.value }))}\r\n                      />\r\n                      {fieldErrors.titre && <div className=\"text-red-600 text-sm mt-1\">{fieldErrors.titre}</div>}\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold mb-1\">Typologie</label>\r\n                      <input\r\n                        className=\"input\"\r\n                        value={editForm?.typologie ?? ''}\r\n                        onChange={(e) => setEditForm((f) => ({ ...f, typologie: e.target.value }))}\r\n                      />\r\n                      {fieldErrors.typologie && <div className=\"text-red-600 text-sm mt-1\">{fieldErrors.typologie}</div>}\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold mb-1\">Période</label>\r\n                      <input\r\n                        className=\"input\"\r\n                        value={editForm?.periode ?? ''}\r\n                        onChange={(e) => setEditForm((f) => ({ ...f, periode: e.target.value }))}\r\n                      />\r\n                      {fieldErrors.periode && <div className=\"text-red-600 text-sm mt-1\">{fieldErrors.periode}</div>}\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold mb-1\">Légende courte (survol)</label>\r\n                      <input\r\n                        className=\"input\"\r\n                        value={editForm?.descriptionCourte ?? ''}\r\n                        onChange={(e) => setEditForm((f) => ({ ...f, descriptionCourte: e.target.value }))}\r\n                      />\r\n                      {fieldErrors.descriptionCourte && <div className=\"text-red-600 text-sm mt-1\">{fieldErrors.descriptionCourte}</div>}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"mt-3\">\r\n                    <label className=\"block text-sm font-semibold mb-1\">Texte</label>\r\n                    <textarea\r\n                      className=\"input\"\r\n                      rows={8}\r\n                      value={editForm?.descriptionLongue ?? ''}\r\n                      onChange={(e) => setEditForm((f) => ({ ...f, descriptionLongue: e.target.value }))}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"mt-3\">\r\n                    <label className=\"block text-sm font-semibold mb-1\">Source (URL)</label>\r\n                    <input\r\n                      className=\"input\"\r\n                      value={editForm?.sourceUrl ?? ''}\r\n                      onChange={(e) => setEditForm((f) => ({ ...f, sourceUrl: e.target.value }))}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"mt-6 flex flex-wrap gap-2\">\r\n                    <button onClick={saveEditing} className=\"btn btn-primary\">\r\n                      Enregistrer\r\n                    </button>\r\n                    <button onClick={cancelEditing} className=\"btn btn-secondary\">\r\n                      Annuler\r\n                    </button>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </>\r\n          )}\r\n        </article>\r\n\r\n        <div className=\"mt-4\">\r\n          <button\r\n            onClick={backToMenu}\r\n            className=\"btn btn-secondary\"\r\n          >\r\n            ← Retour au menu\r\n          </button>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className=\"max-w-5xl mx-auto p-6\">\r\n      <h2 className=\"text-3xl font-bold text-[var(--color-lavender)] mb-6\">Histoire & légendes — Sommaire</h2>\r\n\r\n      {error && <ApiAlert message={error} kind=\"error\" className=\"mb-4\" />}\r\n\r\n      {ready && user && (\r\n        <section className=\"mb-6 border rounded bg-white shadow-sm\">\r\n          <header className=\"px-4 py-3 border-b bg-[var(--bg)] flex items-center justify-between gap-2\">\r\n            <h3 className=\"font-bold text-xl text-[var(--color-lavender)]\">Gestion (loggué)</h3>\r\n            <button className=\"btn btn-primary\" onClick={() => setCreating((v) => !v)}>\r\n              {creating ? 'Fermer' : 'Ajouter une histoire'}\r\n            </button>\r\n          </header>\r\n\r\n          {creating && (\r\n            <form onSubmit={submitCreate} className=\"p-4 space-y-3\">\r\n              <div className=\"grid md:grid-cols-2 gap-3\">\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold mb-1\">Titre *</label>\r\n                  <input\r\n                    className=\"input\"\r\n                    required\r\n                    value={createForm.titre}\r\n                    onChange={(e) => setCreateForm((f) => ({ ...f, titre: e.target.value }))}\r\n                  />\r\n                  {fieldErrors.titre && <div className=\"text-red-600 text-sm mt-1\">{fieldErrors.titre}</div>}\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold mb-1\">Typologie *</label>\r\n                  <input\r\n                    className=\"input\"\r\n                    required\r\n                    value={createForm.typologie}\r\n                    onChange={(e) => setCreateForm((f) => ({ ...f, typologie: e.target.value }))}\r\n                  />\r\n                  {fieldErrors.typologie && <div className=\"text-red-600 text-sm mt-1\">{fieldErrors.typologie}</div>}\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold mb-1\">Période *</label>\r\n                  <input\r\n                    className=\"input\"\r\n                    required\r\n                    value={createForm.periode}\r\n                    onChange={(e) => setCreateForm((f) => ({ ...f, periode: e.target.value }))}\r\n                  />\r\n                  {fieldErrors.periode && <div className=\"text-red-600 text-sm mt-1\">{fieldErrors.periode}</div>}\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold mb-1\">Légende courte (survol)</label>\r\n                  <input\r\n                    className=\"input\"\r\n                    value={createForm.descriptionCourte}\r\n                    onChange={(e) => setCreateForm((f) => ({ ...f, descriptionCourte: e.target.value }))}\r\n                  />\r\n                  {fieldErrors.descriptionCourte && <div className=\"text-red-600 text-sm mt-1\">{fieldErrors.descriptionCourte}</div>}\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-semibold mb-1\">Texte</label>\r\n                <textarea\r\n                  className=\"input\"\r\n                  rows={6}\r\n                  value={createForm.descriptionLongue}\r\n                  onChange={(e) => setCreateForm((f) => ({ ...f, descriptionLongue: e.target.value }))}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-semibold mb-1\">Source (URL)</label>\r\n                <input\r\n                  className=\"input\"\r\n                  value={createForm.sourceUrl}\r\n                  onChange={(e) => setCreateForm((f) => ({ ...f, sourceUrl: e.target.value }))}\r\n                />\r\n              </div>\r\n\r\n              <button type=\"submit\" className=\"btn btn-primary\">\r\n                Créer\r\n              </button>\r\n            </form>\r\n          )}\r\n        </section>\r\n      )}\r\n\r\n      {loading ? (\r\n        <Loader message=\"Chargement du sommaire...\" />\r\n      ) : (\r\n        <div className=\"space-y-8\">\r\n          {Object.keys(menuData).length === 0 && <p className=\"text-gray-600\">Aucun contenu disponible.</p>}\r\n\r\n          {Object.entries(menuData).map(([typologie, periodes]) => (\r\n            <section key={typologie} className=\"border rounded bg-white shadow-sm\">\r\n              <header className=\"px-4 py-3 border-b bg-[var(--bg)]\">\r\n                <h3 className=\"font-bold text-xl text-[var(--color-lavender)]\">{typologie}</h3>\r\n              </header>\r\n\r\n              <div className=\"p-4 space-y-6\">\r\n                {Object.entries(periodes).map(([periode, items]) => (\r\n                  <div key={periode}>\r\n                    <h4 className=\"font-semibold text-lg text-gray-800 mb-2\">{periode}</h4>\r\n\r\n                    <ul className=\"grid md:grid-cols-2 gap-2\">\r\n                      {items.map(({ id, titre, descriptionCourte }) => (\r\n                        <li key={id} className=\"relative\">\r\n                          <button\r\n                            onClick={() => openDetail(id)}\r\n                            className=\"group w-full text-left px-3 py-2 rounded border hover:border-[var(--color-terra)] hover:bg-white\"\r\n                            aria-describedby={`hint-${id}`}\r\n                          >\r\n                            <span className=\"text-[var(--color-terra)] font-medium group-hover:underline\">{titre}</span>\r\n\r\n                            {descriptionCourte && (\r\n                              <span\r\n                                id={`hint-${id}`}\r\n                                className=\"pointer-events-none absolute left-full top-1 ml-3 z-10 hidden group-hover:block group-focus-within:block w-64 p-2 bg-black text-white text-sm rounded shadow-lg\"\r\n                              >\r\n                                {descriptionCourte}\r\n                              </span>\r\n                            )}\r\n                          </button>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </section>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}